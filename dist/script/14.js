webpackJsonp([14],{1277:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),o=r(n),i=a(2),l=r(i),d=a(3),u=r(d),s=a(6),c=r(s),f=a(5),p=r(f),m=a(0),h=r(m),v=a(764),g=r(v),b=a(84),y=r(b),T=a(273),C=function(e){function t(e){(0,l["default"])(this,t);var a=(0,c["default"])(this,(0,o["default"])(t).call(this,e));return a.confirmGoal=a.confirmGoal.bind(a),a.formatTime=a.formatTime.bind(a),a.handleChangeTime=a.handleChangeTime.bind(a),a.goalID=+y["default"].local.get("goalID")||0,a}return(0,p["default"])(t,e),(0,u["default"])(t,[{key:"componentWillMount",value:function(){this.props.modalState&&this.props.modalClose(),this.props.valChange(!1,"upDateStatus")}},{key:"componentDidMount",value:function(){function e(){r.valChange(!0,"upDateStatus")}function t(t){return t.name&&setTimeout(e,50),a.refs.name_ref.value=t.name||"",a.refs.measure_ref.value=t.measure||"",t}var a=this,r=this.props;this.goalID&&r.fetchList("/fitness/fit_goal/"+this.goalID+"/",void 0,"fitGoalInfo",t)}},{key:"formatTime",value:function(e){var t=this.refs[e].value,a=t.split("-"),r=a[0],n=a[1],o=a[2];this.props.valChange(r+"年"+n+"月"+o+"日","adGoalTime")}},{key:"handleChangeTime",value:function(){this.formatTime("cdate_ref")}},{key:"confirmGoal",value:function(){function e(e){return setTimeout(function(){t.directTo("/member/health/"+t.params.userID)},50),e}var t=this.props,a=this.refs.cdate_ref.value,r=this.refs.current_ref.value;if(!r)return void(0,T.toast)("请输入记录数值");if(!a)return void(0,T.toast)("请输入添加记录日期");var n={method:"POST",params:{user:t.params.userID,fit_goal:this.goalID,current:r,cdate:a},querys:{time:Date.now()}};this.props.fetchList("/fitness/goal_record/",n,"addResultInfo",e)}},{key:"render",value:function(){var e=this.props,t=e.modalState?h["default"].createElement(g["default"],{modal:e.modal,modalClose:e.modalClose,modalState:e.modalState,directTo:e.directTo}):"";return h["default"].createElement("div",{className:"container add-course-wrap"},h["default"].createElement("div",{className:"add-course-main"},h["default"].createElement("div",{className:"add-course-item add-course-time"},h["default"].createElement("span",null,"目标名称"),h["default"].createElement("input",{type:"text",name:"name",placeholder:"输入目标名称",ref:"name_ref",disabled:!0,className:"add-course-info add-course-time",required:!0})),h["default"].createElement("div",{className:"add-course-item add-course-time"},h["default"].createElement("span",null,"目标单位"),h["default"].createElement("input",{type:"text",placeholder:"输入单位，如KG",ref:"measure_ref",name:"measure",disabled:!0,className:"add-course-info add-course-time",required:!0})),h["default"].createElement("div",{className:"add-course-item add-course-time"},h["default"].createElement("span",null,"记录数值"),h["default"].createElement("input",{type:"number",placeholder:"输入数据值",ref:"current_ref",name:"current",className:"add-course-info add-course-time",required:!0})),h["default"].createElement("div",{className:"add-course-item record-cdate"},h["default"].createElement("span",null,"记录日期"),h["default"].createElement("p",null,e.adGoalTime),h["default"].createElement("input",{type:"date",placeholder:"输入日期",ref:"cdate_ref",name:"cdate",className:"add-course-info add-course-time",onChange:this.handleChangeTime,required:!0}))),h["default"].createElement("div",{className:"add-confirm",onClick:this.confirmGoal},"确认"),t)}}]),t}(h["default"].Component);C.propTypes={valChange:m.PropTypes.func.isRequired,directTo:m.PropTypes.func.isRequired,fetchList:m.PropTypes.func.isRequired,modal:m.PropTypes.object.isRequired,modalState:m.PropTypes.bool.isRequired,modalOpen:m.PropTypes.func.isRequired,modalClose:m.PropTypes.func.isRequired,fitGoalInfo:m.PropTypes.object.isRequired,addResultInfo:m.PropTypes.object.isRequired,upDateStatus:m.PropTypes.bool.isRequired,adGoalTime:m.PropTypes.string.isRequired,params:m.PropTypes.object},C.defaultPropTypes={addResultInfo:{}},t["default"]=C},1278:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(376),o=a(272),i=a(1277),l=r(i),d={fetchList:function(e,t,a,r){return(0,o.fetchList)(e,t,a,r)},modalClose:function(){return(0,o.modalClose)()},modalOpen:function(e){return(0,o.modalOpen)(e)},directTo:function(e){return(0,o.directTo)(e)},valChange:function(e,t){return(0,o.valChange)(e,t)}},u=function(e){return{modal:e.addGoalRecord.modal,modalState:e.addGoalRecord.modalState,fitGoalInfo:e.addGoalRecord.fitGoalInfo,addResultInfo:e.addGoalRecord.addResultInfo,upDateStatus:e.addGoalRecord.upDateStatus,adGoalTime:e.addGoalRecord.adGoalTime}};t["default"]=(0,n.connect)(u,d)(l["default"])},1279:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){var e=arguments.length<=0||void 0===arguments[0]?s:arguments[0],t=arguments[1],a=(0,d.urlPathParse)(location.pathname);if("add-goal-record"!==a)return e;var r=u[t.type];return r?r(e,t):e}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=r(o);t["default"]=n;var l=a(375),d=a(273),u=(0,i["default"])({},l.globalHandler),s={modal:{},modalState:!1,addResultInfo:{},fitGoalInfo:{},upDateStatus:!1,adGoalTime:""}},1350:function(e,t,a){t=e.exports=a(759)(),t.push([e.i,"hr{width:0!important}.add-course-main{border-top:10px solid #edf0f5}.add-course-item{border-bottom:1px solid #f4f5f6;overflow:hidden;padding:.8rem 1rem .8rem 0;position:relative}.add-course-item span{float:left;padding:0 1rem;font-size:1rem;line-height:48px;text-align:center}.add-course-item span:last-child{position:absolute;right:1rem}.add-course-info{float:right;border:1px solid #f4f5f6;border-radius:5px;text-align:center}.add-course-time input{width:256px;height:48px;line-height:48px;font-size:1rem}.add-confirm{height:3.2rem;line-height:3.2rem;color:#fff;background:#2f3e9e;text-align:center;margin:3rem 1rem 0;border-radius:.5rem;font-size:1.3rem;font-weight:700}.add-cancel{background:#edf0f5;color:rgba(0,0,0,.298039)}.add-course-textarea{float:right;border:1px solid #f4f5f6;border-radius:5px;width:256px;height:88px;text-align:center;line-height:20px;font-size:1rem}.record-cdate{position:relative}.record-cdate p{text-align:center}.record-cdate input,.record-cdate p{width:256px;position:absolute;right:1rem;top:.8rem;height:48px;line-height:48px}.record-cdate input{color:transparent;background:transparent;z-index:1;font-size:1rem}",""])},1371:function(e,t,a){var r=a(1350);"string"==typeof r&&(r=[[e.i,r,""]]);a(760)(r,{});r.locals&&(e.exports=r.locals)},736:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(375),o=a(1278),i=r(o),l=a(1279),d=r(l);a(1371),t["default"]=function(e,t){(0,n.injectReducer)(e,{key:"addGoalRecord",reducer:d["default"]}),t(null,i["default"])}},759:function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var a=this[t];a[2]?e.push("@media "+a[2]+"{"+a[1]+"}"):e.push(a[1])}return e.join("")},e.i=function(t,a){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(r[o]=!0)}for(n=0;n<t.length;n++){var i=t[n];"number"==typeof i[0]&&r[i[0]]||(a&&!i[2]?i[2]=a:a&&(i[2]="("+i[2]+") and ("+a+")"),e.push(i))}},e}},760:function(e,t){function a(e,t){for(var a=0;a<e.length;a++){var r=e[a],n=f[r.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](r.parts[o]);for(;o<r.parts.length;o++)n.parts.push(d(r.parts[o],t))}else{for(var i=[],o=0;o<r.parts.length;o++)i.push(d(r.parts[o],t));f[r.id]={id:r.id,refs:1,parts:i}}}}function r(e){for(var t=[],a={},r=0;r<e.length;r++){var n=e[r],o=n[0],i=n[1],l=n[2],d=n[3],u={css:i,media:l,sourceMap:d};a[o]?a[o].parts.push(u):t.push(a[o]={id:o,parts:[u]})}return t}function n(e,t){var a=h(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?a.insertBefore(t,r.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function i(e){var t=document.createElement("style");return t.type="text/css",n(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",n(e,t),t}function d(e,t){var a,r,n;if(t.singleton){var d=g++;a=v||(v=i(t)),r=u.bind(null,a,d,!1),n=u.bind(null,a,d,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=l(t),r=c.bind(null,a),n=function(){o(a),a.href&&URL.revokeObjectURL(a.href)}):(a=i(t),r=s.bind(null,a),n=function(){o(a)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}function u(e,t,a,r){var n=a?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,n);else{var o=document.createTextNode(n),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function s(e,t){var a=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function c(e,t){var a=t.css,r=t.sourceMap;r&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var n=new Blob([a],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(n),o&&URL.revokeObjectURL(o)}var f={},p=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=p(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,g=0,b=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=r(e);return a(n,t),function(e){for(var o=[],i=0;i<n.length;i++){var l=n[i],d=f[l.id];d.refs--,o.push(d)}if(e){var u=r(e);a(u,t)}for(var i=0;i<o.length;i++){var d=o[i];if(0===d.refs){for(var s=0;s<d.parts.length;s++)d.parts[s]();delete f[d.id]}}}};var y=function(){var e=[];return function(t,a){return e[t]=a,e.filter(Boolean).join("\n")}}()},764:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(765),o=r(n);t["default"]=o["default"]},765:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),o=r(n),i=a(2),l=r(i),d=a(3),u=r(d),s=a(6),c=r(s),f=a(5),p=r(f),m=a(0),h=r(m),v=a(274),g=r(v),b=a(275),y=r(b),T=function(e){function t(e){(0,l["default"])(this,t);var a=(0,c["default"])(this,(0,o["default"])(t).call(this,e));return a.confirm=a.confirm.bind(a),a.cancel=a.cancel.bind(a),a}return(0,p["default"])(t,e),(0,u["default"])(t,[{key:"confirm",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.props.modal;t.confirmCallback&&t.confirmCallback(),this.props.modalClose()}},{key:"cancel",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.props.modal;t.cancelCallback&&t.cancelCallback(),this.props.modalClose()}},{key:"render",value:function(){var e=this.props,t=void 0;return t=e.cancel&&e.confirm?[h["default"].createElement(y["default"],{label:e.cancel,primary:!0,onTouchTap:this.cancel}),h["default"].createElement(y["default"],{label:e.confirm,primary:!0,onTouchTap:this.confirm})]:[h["default"].createElement(y["default"],{label:e.confirm||"确认",primary:!0,onTouchTap:this.confirm})],h["default"].createElement(g["default"],{modal:!1,actions:t,open:e.modalState,onRequestClose:e.modalClose},e.modal.content)}}]),t}(h["default"].Component);T.propTypes={modal:m.PropTypes.object.isRequired,modalState:m.PropTypes.bool.isRequired,modalClose:m.PropTypes.func.isRequired,directTo:m.PropTypes.func},T.defaultProps={modal:{content:"",cancel:"",cancelCallback:function(){},confirm:"",confirmCallback:function(){}}},t["default"]=T}});